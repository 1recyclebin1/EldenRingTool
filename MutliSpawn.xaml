<Window x:Class="EldenRingTool.MutliSpawn"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Multi-Spawn" Height="500px" Width="700" ResizeMode="NoResize">
    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="2*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="75px" />
        </Grid.RowDefinitions>

        <StackPanel Grid.Column="0" Grid.Row="0" Orientation="Horizontal" >
            <Label>Search:</Label>
            <TextBox Name="FilterBox" Margin="0 0 0 5" TextChanged="FilterBox_TextChanged" Width="225"/>
            <Button Content="X" Click="ClearFilter_Click" Width="20" Height="20.5" Margin="2,0,0,3.5"/>
        </StackPanel>
        
        <StackPanel Grid.Column="2" Grid.Row="0" Orientation="Horizontal" >
            <Label x:Name="LoadedBuildName"></Label>
        </StackPanel>

        <StackPanel Grid.Column="0" Grid.Row="1">
            <ListBox x:Name="AvailableList" Height="300" 
                     SelectionChanged="AvailableItems_SelectionChanged"
                     ItemsSource="{Binding AvailableItems}"
                     DisplayMemberPath="Name"
                     MouseDoubleClick="AvailableItemsListBox_MouseDoubleClick"/>
        </StackPanel>

        <StackPanel Orientation="Horizontal" Grid.Row="2" Grid.ColumnSpan="2">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="90px" />
                    <ColumnDefinition Width="140px" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <Label Grid.Row="0" Grid.Column="0">Level:</Label>
                <ComboBox Grid.Row="1" Grid.Column="0" Width="45px" x:Name="comboLevel" SelectedIndex="0" Margin="0,0,5,0"></ComboBox>
                <Label Grid.Row="0" Grid.Column="1">Infusion:</Label>
                <ComboBox Grid.Row="1" Grid.Column="1" x:Name="comboInfusion" ItemsSource="{Binding Infusions}" DisplayMemberPath="Name" SelectedValuePath="Id" SelectedIndex="0" Margin="0,0,5,0"></ComboBox>
                <Label Grid.Row="0" Grid.Column="2">Ash of War:</Label>
                <ComboBox Grid.Row="1" Grid.Column="2" x:Name="comboAsh" ItemsSource="{Binding Ashes}" DisplayMemberPath="Name" SelectedValuePath="Id" SelectedIndex="0" Margin="0,0,5,0"></ComboBox>
                <Label Grid.Row="0" Grid.Column="3">Qty:</Label>
                <TextBox Grid.Row="1" Grid.Column="3" x:Name="txtQuantity" TextAlignment="Center">1</TextBox>

            </Grid>
        </StackPanel>

        <!-- Shuttle Buttons -->
        <StackPanel Grid.Column="1" Grid.Row="1" VerticalAlignment="Center" Margin="10,0">
            <Button Content="&gt;" Click="AddButton_Click" Width="40" Margin="0 5"/>
            <Button Content="&lt;" Click="RemoveButton_Click" Width="40" Margin="0 5"/>
        </StackPanel>

        <!-- Right Panel: Selected Items -->
        <StackPanel Grid.Column="2" Grid.Row="1">
            <ListBox x:Name="SelectedList" 
                     SelectionMode="Extended"
                     ItemsSource="{Binding SelectedItems}"
                     Height="300">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="2">
                            <TextBlock>
                                <TextBlock.Text>
                                    <MultiBinding StringFormat="{}{0}, +{1}, {2}, {3}, x{4}">
                                        <Binding Path="Name" />
                                        <Binding Path="Level" />
                                        <Binding Path="InfusionName" />
                                        <Binding Path="AshOfWarName" />
                                        <Binding Path="Quantity" />
                                    </MultiBinding>
                                </TextBlock.Text>
                            </TextBlock>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </StackPanel>

        <!-- Spawn Control -->
        <StackPanel Grid.Row="3" Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,0,0,10" Height="20px">
            <Button x:Name="SingleSpawnButton" Content="Spawn" Click="QuickSpawn_Click" MinWidth="50" Margin="0,0,10,0" Padding="10,0" IsEnabled="False"/>
        </StackPanel>

        <StackPanel Grid.Row="2" Grid.Column="3" Orientation="Vertical" Margin="0,10,0,0">
            <StackPanel Orientation="Horizontal" Margin="0,0,0,10" Height="25px">
                <ComboBox x:Name="comboLoadBuild" ItemsSource="{Binding Builds}" Width="150" Margin="10,0,5,0" SelectionChanged="ComboLoadBuild_SelectionChanged"/>
                <Button Content="Delete Build" Click="DeleteBuild_Click" Width="100" Margin="5,0"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="0,0,0,10" Height="25px">
                <TextBox x:Name="txtBuildName" Width="150" Margin="10,0,5,0"/>
                <Button Content="Save Build" Click="SaveBuild_Click" Width="100" Margin="5,0"/>
            </StackPanel>
        </StackPanel>

        <!-- Bottom Controls -->
        <StackPanel Grid.Row="3" Grid.Column="3" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,0,0,10" Grid.ColumnSpan="3" Height="20px">
            <Button x:Name="SpawnAllButton" Content="Spawn All" Click="btnSpawnAll_Click" Width="100" IsEnabled="False"/>
        </StackPanel>
 
    </Grid>
</Window>
